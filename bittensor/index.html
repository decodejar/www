[Immersive content redacted for brevity.]
                 axis.ticks.push(...validTicks);
             };
 
            /**
             * NEW: Manually generates Y-axis ticks for powers of 10.
             */
            function yAxisAfterBuildTicks(axis) {
                const newTicks = [];
                const min = axis.min;
                const max = axis.max;

                // Find the starting power of 10
                let startingPower = Math.floor(Math.log10(min));
                let currentMagnitude = Math.pow(10, startingPower); // e.g., 10, 100, 1000

                while (currentMagnitude < max) {
                    // Add minor ticks (1, 2, 3 ... 9 or 10, 20, 30, ... 90)
                    for (let i = 1; i <= 9; i++) {
                        const tickValue = currentMagnitude * i;
                        if (tickValue > max) break; // Stop if we go past the axis max
                        if (tickValue >= min) {
                            newTicks.push({ value: tickValue });
                        }
                    }
                    currentMagnitude *= 10; // Move to the next magnitude (e.g., 100, 1000)
                }

                axis.ticks.length = 0; // Clear existing ticks
                axis.ticks.push(...newTicks);
            }

            // --- 5. CHART UPDATE OR CREATION ---
            const datasetDefaults = {
[Immersive content redacted for brevity.]
                            y: {
                                type: 'logarithmic', min: extendedMinPrice, max: extendedMaxPrice,
                                title: { display: true, text: 'Price (Log Scale)', color: '#4b5563' },
                                ticks: { 
                                    color: '#4b5563',
                                    callback: function(value, index, ticks) {
                                        const logVal = Math.log10(value);
                                        if (Math.abs(logVal - Math.round(logVal)) < 1e-9) {
                                            return `$${value.toLocaleString()}`;
                                        }
                                        return ''; 
                                    }
                                },
                                afterBuildTicks: yAxisAfterBuildTicks, // NEW: Apply manual tick generator
                                grid: { 
                                    color: function(context) {
                                        const value = context.tick.value;
[Immersive content redacted for brevity.]

